process TEST2 = {

  source = PoolSource { 
    untracked vstring fileNames = { 
        'file:data/data100/allRecHits.root'
       ,'file:data/data90/allRecHits.root'
       ,'file:data/data80/allRecHits.root'
       ,'file:data/data70/allRecHits.root'
       ,'file:data/data60/allRecHits.root'
       ,'file:data/data50/allRecHits.root'
       ,'file:data/data40/allRecHits.root'
       ,'file:data/data30/allRecHits.root'
       ,'file:data/data25/allRecHits.root'
       ,'file:data/data20/allRecHits.root'
       ,'file:data/data15/allRecHits.root'
       ,'file:data/data10/allRecHits.root'
       ,'file:data/data07/allRecHits.root'
       ,'file:data/data04/allRecHits.root'
       ,'file:data/data02/allRecHits.root'
#       ,'file:data/data01/allRecHits.root'
    }
    untracked int32 maxEvents = 3 
    untracked uint32 debugVerbosity = 0
    untracked bool   debugFlag   = true
  }

  include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
  include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"
  include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"
  include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"
  include "RecoTracker/GeometryESProducer/data/TrackerRecoGeometryESProducer.cfi"
  include "RecoLocalTracker/SiStripRecHitConverter/data/StripCPEfromTrackAngle.cfi"
  include "RecoLocalTracker/SiStripRecHitConverter/data/SiStripRecHitMatcher.cfi"
  include "RecoLocalTracker/SiPixelRecHits/data/PixelCPEParmError.cfi"
  include "RecoTracker/TransientTrackingRecHit/data/TransientTrackingRecHitBuilder.cfi"
  include "RecoTracker/MeasurementDet/data/MeasurementTrackerESProducer.cfi"


#TransientTrackingBuilder
es_module ttrhb4Pixel = ttrhbwr from "RecoTracker/TransientTrackingRecHit/data/TransientTrackingRecHitBuilder.cfi"
replace ttrhb4Pixel.StripCPE = "Fake"
replace ttrhb4Pixel.ComponentName = "PixelTTRHBuilderWithoutAngle"


  
  service = MessageLogger { untracked vstring destinations = {"debug.log"} }


  module analysis = PairAnalysis {

    PSet RegionFactoryPSet = {
      string ComponentName = "MyRegions"
      PSet RegionPSet = {
        double ptMin = 10.0
        double originRadius = 1.e-4 
        double originHalfLength = 1.e-4 
        double originZPos = 0.0
        bool precise = true
      }
      vdouble deltaR = {1.e-4, 0.05, 0.1, 0.2, 0.5, 0.7, -1.}
      bool useParticleVertex = true
      int32  useParticleId = 13
      double ptMinLeadingTrack = 0.2
    }


    PSet OrderedHitsFactoryPSet = {

      string ComponentName = "StandardHitPairGenerator"
      include "RecoTracker/TkSeedingLayers/data/PixelLayerPairs.cfi"

#       string ComponentName = "StandardHitTripletGenerator"
#       include "RecoTracker/TkSeedingLayers/data/PixelLayerTriplets.cfi"
#       include "RecoTracker/TkSeedingLayers/data/MixedLayerTriplets.cfi"
#       include "RecoPixelVertexing/PixelTriplets/data/PixelTripletHLTGenerator.cfi"

    }

    PSet AnalysisPSet = { 
      PSet AssociatorPSet = {
        bool associateStrip = true
#        bool associateStrip = false 
        bool associatePixel = true
        bool associateRecoTracks = false
        vstring ROUList = {
          "TrackerHitsTIBLowTof","TrackerHitsTIBHighTof",
          "TrackerHitsTIDLowTof","TrackerHitsTIDHighTof",
          "TrackerHitsTOBLowTof","TrackerHitsTOBHighTof",
          "TrackerHitsTECLowTof","TrackerHitsTECHighTof",
          "TrackerHitsPixelBarrelLowTof","TrackerHitsPixelBarrelHighTof",
          "TrackerHitsPixelEndcapLowTof","TrackerHitsPixelEndcapHighTof"
        }
      }
    }
  }

  path p = { analysis }
}

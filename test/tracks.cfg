process testEffic =
{

untracked PSet maxEvents = {untracked int32 input = -1}

  source = PoolSource {
#     include "UserCode/konec/test/SingleMuTmp.cfi"
     untracked vstring fileNames = {'file:data/SingleMu_3m.root'}
#    untracked vstring fileNames = {'file:data/SingleMu_1p.root', 'file:data/SingleMu_1m.root'}
  }


  ### StripCPEfromTrackAngleESProducer es_module
  include "RecoLocalTracker/SiStripRecHitConverter/data/StripCPEfromTrackAngle.cfi"
  include "CalibTracker/SiStripLorentzAngle/data/SiStripLAFakeESSource.cfi"
  include "CalibTracker/Configuration/data/SiPixelLorentzAngle/SiPixelLorentzAngle_Fake.cff"


  ### SeedGenerator module ###
#  include "RecoTracker/TkSeedGenerator/data/GlobalPixelSeeds.cff"
#  include "RecoTracker/TkSeedGenerator/data/GlobalMixedSeeds.cff"
#  include "RecoTracker/TkSeedGenerator/data/SeedGeneratorFromProtoTracksEDProducer.cff"
#  include "RecoMuon/TrackerSeedGenerator/data/SeedsFromL1Muon.cff"
#  include "RecoMuon/TrackerSeedGenerator/data/SeedsFromL2Muon.cff"

  # KFTrackCandidateMaker
  include "RecoTracker/TkSeedingLayers/data/TTRHBuilderWithoutAngle4PixelTriplets.cfi"
  include "RecoTracker/TkSeedingLayers/data/TTRHBuilderWithoutAngle4MixedTriplets.cfi"
  include "RecoTracker/TransientTrackingRecHit/data/TransientTrackingRecHitBuilderWithoutRefit.cfi"
  
  include "RecoTracker/TkSeedingLayers/data/PixelLayerTriplets.cfi"
  include "RecoTracker/TkSeedingLayers/data/MixedLayerTriplets.cfi"
  include "RecoPixelVertexing/PixelTrackFitting/data/PixelFitterByConformalMappingAndLine.cfi"
  include "RecoPixelVertexing/PixelTrackFitting/data/PixelTracks.cff"
#  replace pixelTracks.OrderedHitsFactoryPSet.SeedingLayers = "MixedLayerTriplets"
  replace pixelTracks.FitterPSet = { using PixelFitterByConformalMappingAndLine 
#  double fixImpactParameter = 0.
  }

#  replace pixelTracks.RegionFactoryPSet = {
#      string ComponentName = "MyRegions"
#      PSet RegionPSet = {
#        double originXPos = 0.0
#        double originYPos = 0.0
#        double originZPos = 0.0
#        double originRadius = 0.005
#        double originHalfLength = 0.0001
#        bool precise = true
#      }
#      vdouble deltaR = {0.5}
#      bool useParticleVertex = true
#      int32  useParticleId = 13
#      double ptMinLeadingTrack = 0.9
#  } 

#  include "RecoTracker/CkfPattern/data/CkfTrackCandidates.cff"
#  replace ckfTrackCandidates.SeedProducer = "globalMixedSeeds"
#  replace ckfTrackCandidates.SeedProducer = "globalPixelSeeds"
#  replace ckfTrackCandidates.SeedProducer = "globalPixelLessSeeds"
#  replace ckfTrackCandidates.SeedProducer = "seedsFromProtoTracks"
#  replace ckfTrackCandidates.SeedProducer = "seedsFromL1Muon"
#  replace ckfTrackCandidates.SeedProducer = "seedsFromL2Muon"

#  CTF track fit with material
#  include "RecoTracker/TrackProducer/data/CTFFinalFitWithMaterial.cff"

  service = MessageLogger { untracked vstring destinations = {"cout"} }

  module analysis = TrackAnalysis {
    string TrackCollection = "pixelTracks"
#    string TrackCollection = "ctfWithMaterialTracks"

    PSet AssociatorPSet = {
      bool associateStrip = true
      bool associatePixel = true
      bool associateRecoTracks = true
      double MinHitFraction = 0.5
      vstring ROUList = {
        "TrackerHitsTIBLowTof","TrackerHitsTIBHighTof",
        "TrackerHitsTIDLowTof","TrackerHitsTIDHighTof",
        "TrackerHitsTOBLowTof","TrackerHitsTOBHighTof",
        "TrackerHitsTECLowTof","TrackerHitsTECHighTof",
        "TrackerHitsPixelBarrelLowTof","TrackerHitsPixelBarrelHighTof",
        "TrackerHitsPixelEndcapLowTof","TrackerHitsPixelEndcapHighTof"
      }
    }

    PSet AnalysisPSet = {
      int32  useParticleId = 13
      double ptMinLeadingTrack = 0.9 
    }
  }

#  path p = { globalPixelSeeds, ckfTrackCandidates, ctfWithMaterialTracks, analysis }
#   path p = { globalMixedSeeds, ckfTrackCandidates, ctfWithMaterialTracks, analysis }
#  path p = {pixelTracks, seedsFromProtoTracks, ckfTrackCandidates, ctfWithMaterialTracks, analysis}
  path p = {pixelTracks, analysis}
#  path p = {seedsFromL1Muon, ckfTrackCandidates, ctfWithMaterialTracks, analysis}
#  path p = {seedsFromL2Muon, ckfTrackCandidates, ctfWithMaterialTracks, analysis}

}


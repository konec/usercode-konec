process tracking =
{

untracked PSet maxEvents = {untracked int32 input = -1}

  source = PoolSource {
#      include "UserCode/konec/test/ttbar.cfi"
#     include "UserCode/konec/test/l1mu.cfi"
    untracked vstring fileNames = {'file:data/l1mu_9m.root'}
#    untracked vstring fileNames = {'file:data/l1mu_10m.root', 'file:data/l1mu_10p.root'}
  }

  ### SeedGenerator module ###
  include "RecoTracker/TkSeedGenerator/data/GlobalPixelSeeds.cff"
  replace globalPixelSeeds.OrderedHitsFactoryPSet = { 
    string ComponentName = "StandardHitTripletGenerator"
    string SeedingLayers = "PixelLayerTriplets"
    include "RecoPixelVertexing/PixelTriplets/data/PixelTripletHLTGenerator.cfi"
    PSet GeneratorPSet = {
      string ComponentName = "PixelTripletHLTGenerator"
      bool useFixedPreFiltering = false
      double phiPreFiltering = 0.3          # can be removed if !useFixedPreFiltering
      double extraHitRZtolerance   = 0.06
      double extraHitRPhitolerance = 0.06
      bool useBending = true
      bool useMultScattering = true
    }
  }

#  include "CalibTracker/SiStripLorentzAngle/data/SiStripLAFakeESSource.cfi"
  include "RecoTracker/TkSeedGenerator/data/SeedGeneratorFromProtoTracksEDProducer.cff"
  include "RecoMuon/TrackerSeedGenerator/data/SeedsFromL1Muon.cff"
  include "RecoMuon/TrackerSeedGenerator/data/SeedsFromL2Muon.cff"

  # KFTrackCandidateMaker
  include "RecoTracker/CkfPattern/data/CkfTrackCandidates.cff"
#  replace ckfTrackCandidates.SeedProducer = "globalPixelSeeds"
#  replace ckfTrackCandidates.SeedProducer = "seedsFromProtoTracks"
#  replace ckfTrackCandidates.SeedProducer = "seedsFromL1Muon"
  replace ckfTrackCandidates.SeedProducer = "seedsFromL2Muon"

  # CTF track fit with material
  include "RecoTracker/TrackProducer/data/CTFFinalFitWithMaterial.cff"

  service = MessageLogger { untracked vstring destinations = {"cout"} }

  module analysis = TrackAnalysis {
#    string TrackCollection = "pixelTracks"
    string TrackCollection = "ctfWithMaterialTracks"

    PSet AssociatorPSet = {
      bool associateStrip = true
      bool associatePixel = true
      bool associateRecoTracks = true
      double MinHitFraction = 0.5
      vstring ROUList = {
        "TrackerHitsTIBLowTof","TrackerHitsTIBHighTof",
        "TrackerHitsTIDLowTof","TrackerHitsTIDHighTof",
        "TrackerHitsTOBLowTof","TrackerHitsTOBHighTof",
        "TrackerHitsTECLowTof","TrackerHitsTECHighTof",
        "TrackerHitsPixelBarrelLowTof","TrackerHitsPixelBarrelHighTof",
        "TrackerHitsPixelEndcapLowTof","TrackerHitsPixelEndcapHighTof"
      }
    }

    PSet AnalysisPSet = {
      int32  useParticleId = 13
      double ptMinLeadingTrack = 10. 
    }
  }

#  path p = { globalPixelSeeds , ckfTrackCandidates, ctfWithMaterialTracks, analysis }
#  path p = {pixelTracks, seedsFromProtoTracks, ckfTrackCandidates, ctfWithMaterialTracks, analysis}
#  path p = {pixelTracks, analysis}
#  path p = {seedsFromL1Muon, ckfTrackCandidates, ctfWithMaterialTracks, analysis}
  path p = {seedsFromL2Muon, ckfTrackCandidates, ctfWithMaterialTracks, analysis}

}

